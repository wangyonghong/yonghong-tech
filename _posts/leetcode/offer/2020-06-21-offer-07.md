---
title: LeetCode 剑指 Offer 07. 重建二叉树
key: leetcode-offer-07
permalink: /leetcode/offer/07/
tags:
- leetcode
description: 输入某二叉树的前序遍历和中序遍历的结果，请重建该二叉树。假设输入的前序遍历和中序遍历的结果中都不含重复的数字。
---

## 题目详情

输入某二叉树的前序遍历和中序遍历的结果，请重建该二叉树。假设输入的前序遍历和中序遍历的结果中都不含重复的数字。

例如，给出

```
前序遍历 preorder = [3,9,20,15,7]
中序遍历 inorder = [9,3,15,20,7]
```

返回如下的二叉树：

```
    3
   / \
  9  20
    /  \
   15   7
```

**限制：**

```
0 <= 节点个数 <= 5000
```

<!--more-->

## 题解

```java
/**
 * Definition for a binary tree node.
 * public class TreeNode {
 *     int val;
 *     TreeNode left;
 *     TreeNode right;
 *     TreeNode(int x) { val = x; }
 * }
 */
class Solution {
    public TreeNode buildTree(int[] pre, int[] in) {
        if (pre == null || pre.length == 0) {
            return null;
        }
        Map<Integer, Integer> indexMap = new HashMap<>();
        for (int i = 0; i < in.length; i++) {
            indexMap.put(in[i], i);
        }
        return buildTree(pre, 0, pre.length - 1, in, 0, in.length - 1, indexMap);
    }

    public TreeNode buildTree(int[] pre, int preLeft, int preRight, int[] in, int inLeft, int inRight, Map<Integer, Integer> indexMap) {
        if (preLeft > preRight) {
            return null;
        }
        int rootVal = pre[preLeft];
        TreeNode node = new TreeNode(rootVal);
        if (preLeft == preRight) {
            return node;
        } else {
            int rootIndex = indexMap.get(rootVal);
            int leftNodes = rootIndex - inLeft, rightNodes = inRight - rootIndex;
            node.left = buildTree(pre, preLeft + 1, preLeft + leftNodes, in, inLeft, rootIndex - 1, indexMap);
            node.right = buildTree(pre, preRight - rightNodes + 1, preRight, in, rootIndex + 1, inRight, indexMap);
            return node;
        }

    }
}
```

## 下一题

题解链接：[LeetCode 剑指 Offer 09. 用两个栈实现队列](/leetcode/offer/09/)

用两个栈实现一个队列。队列的声明如下，请实现它的两个函数 `appendTail` 和 `deleteHead` ，分别完成在队列尾部插入整数和在队列头部删除整数的功能。(若队列中没有元素，`deleteHead` 操作返回 -1 )

**示例 1：**

```
输入：
["CQueue","appendTail","deleteHead","deleteHead"]
[[],[3],[],[]]
输出：[null,null,3,-1]
```

**示例 2：**

```
输入：
["CQueue","deleteHead","appendTail","appendTail","deleteHead","deleteHead"]
[[],[],[5],[2],[],[]]
输出：[null,-1,null,null,5,2]
```

**提示：**

- `1 <= values <= 10000`
- `最多会对 appendTail、deleteHead 进行 10000 次调用`

题解链接：[LeetCode 剑指 Offer 09. 用两个栈实现队列](/leetcode/offer/09/)